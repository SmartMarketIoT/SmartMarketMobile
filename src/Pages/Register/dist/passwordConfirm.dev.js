"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=PasswordConfirm;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _Helix=_interopRequireWildcard(require("../../Services/Helix"));var _asyncStorage=_interopRequireDefault(require("@react-native-community/async-storage"));var _reactNative=require("react-native");var _Components=require("../../Components");var _jsxFileName="/home/matheus/Projects/SmartMarket/src/Pages/Register/passwordConfirm.js";function PasswordConfirm(_ref){var navigation=_ref.navigation,route=_ref.route;var _useState=(0,_react.useState)(null),_useState2=(0,_slicedToArray2["default"])(_useState,2),pwdConfirm=_useState2[0],setPwdConfirm=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=(0,_slicedToArray2["default"])(_useState3,2),pwdConfirmError=_useState4[0],setPwdConfirmError=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=(0,_slicedToArray2["default"])(_useState5,2),nextId=_useState6[0],setNextId=_useState6[1];function onNext(){var nextId,register;return _regenerator["default"].async(function onNext$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator["default"].awrap(_Helix.GetNextProduct._55);case 2:nextId=_context.sent;if(!(pwdConfirm!=route.params.pwd)){_context.next=7;break;}setPwdConfirmError("Senha diferente da anterior");_context.next=30;break;case 7:_context.prev=7;register=_Helix["default"].post(_Helix.CreateOrUPdate,{actionType:"APPEND",entities:[{type:"Client",id:nextId,name:{type:"Text",value:route.params.nome},email:{type:"Text",value:route.params.email},password:{type:"Text",value:route.params.pwd}}]});_context.next=11;return _regenerator["default"].awrap(register);case 11:_context.t0=_context.sent.status;if(!(_context.t0==204)){_context.next=23;break;}_context.t1=console;_context.next=16;return _regenerator["default"].awrap(register);case 16:_context.t2=_context.sent.request;_context.t1.log.call(_context.t1,"rgs",_context.t2);_context.next=20;return _regenerator["default"].awrap(_asyncStorage["default"].setItem('@userId',nextId));case 20:navigation.navigate('RegisterFinish');_context.next=24;break;case 23:setPwdConfirmError("Erro ao finalizar o cadastro");case 24:_context.next=30;break;case 26:_context.prev=26;_context.t3=_context["catch"](7);console.log(_context.t3);setPwdConfirmError("Erro ao finalizar o cadastro");case 30:case"end":return _context.stop();}}},null,null,[[7,26]]);}return _react["default"].createElement(_Components.Container,{__self:this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:9}},_react["default"].createElement(_Components.ContentContainer,{__self:this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:13}},_react["default"].createElement(_Components.BackButton,{onButtonPress:function onButtonPress(){navigation.goBack();},__self:this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:17}}),_react["default"].createElement(_Components.PageTitle,{text:"Confirma\xE7\xE3o de senha",__self:this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:17}}),_react["default"].createElement(_reactNative.View,{__self:this,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:17}},_react["default"].createElement(_Components.InputLabel,{text:"Digite novamente a senha",__self:this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:21}}),_react["default"].createElement(_Components.TextInput,{secureTextEntry:true,value:pwdConfirm,onChangeText:setPwdConfirm,error:pwdConfirmError,__self:this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:21}})),_react["default"].createElement(_Components.Button,{title:"Pr\xF3ximo",onButtonPress:onNext,__self:this,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:17}})));}