"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=Login;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Components=require("../../Components");var _styles=require("./styles");var _lastOnline=_interopRequireDefault(require("../../Assets/images/lastOnline.png"));var _Helix=_interopRequireWildcard(require("../../Services/Helix"));var _asyncStorage=_interopRequireDefault(require("@react-native-community/async-storage"));var _jsxFileName="/home/matheus/Projects/SmartMarket/src/Pages/Login/index.js";function Login(_ref){var navigation=_ref.navigation;var _useState=(0,_react.useState)("Giovanna@market.com"),_useState2=(0,_slicedToArray2["default"])(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=(0,_slicedToArray2["default"])(_useState3,2),emailError=_useState4[0],setEmailError=_useState4[1];var _useState5=(0,_react.useState)("123456789"),_useState6=(0,_slicedToArray2["default"])(_useState5,2),pwd=_useState6[0],setPwd=_useState6[1];var _useState7=(0,_react.useState)(null),_useState8=(0,_slicedToArray2["default"])(_useState7,2),pwdError=_useState8[0],setPwdError=_useState8[1];(0,_react.useEffect)(function(){},[]);function onLoginPress(){var response;return _regenerator["default"].async(function onLoginPress$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log("assss");if(!email)setEmailError("Você precisa preencher o e-mail!");else setEmailError(null);if(!pwd)setPwdError("Você precisa preencher a senha!");else setPwdError(null);if(!(!emailError&&!pwdError)){_context.next=20;break;}_context.prev=4;_context.next=7;return _regenerator["default"].awrap(_Helix["default"].get("".concat(_Helix.Entities,"/?q=email==").concat(email,"&type=Client")));case 7:response=_context.sent;if(!(response.status==200&&response.data.length>0)){_context.next=14;break;}_context.next=11;return _regenerator["default"].awrap(_asyncStorage["default"].setItem('@userId',response.data[0].id));case 11:navigation.navigate('MainTabNavigator');_context.next=15;break;case 14:setPwdError("Usuário ou senha inválidos");case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context["catch"](4);alert(_context.t0);case 20:case"end":return _context.stop();}}},null,null,[[4,17]]);}return _react["default"].createElement(_Components.Container,{__self:this,__source:{fileName:_jsxFileName,lineNumber:57,columnNumber:9}},_react["default"].createElement(_Components.ContentContainer,{__self:this,__source:{fileName:_jsxFileName,lineNumber:58,columnNumber:13}},_react["default"].createElement(_Components.BackButton,{onButtonPress:function onButtonPress(){navigation.goBack();},__self:this,__source:{fileName:_jsxFileName,lineNumber:59,columnNumber:17}}),_react["default"].createElement(_styles.Media,{source:_lastOnline["default"],__self:this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:17}}),_react["default"].createElement(_reactNative.View,{__self:this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:17}},_react["default"].createElement(_Components.InputLabel,{text:"E-mail:",__self:this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:21}}),_react["default"].createElement(_Components.TextInput,{value:email,onChangeText:function onChangeText(val){return setEmail(val);},error:emailError,__self:this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:21}}),_react["default"].createElement(_Components.InputLabel,{text:"Senha:",__self:this,__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:21}}),_react["default"].createElement(_Components.TextInput,{value:pwd,onChangeText:function onChangeText(val){return setPwd(val);},secureTextEntry:true,error:pwdError,__self:this,__source:{fileName:_jsxFileName,lineNumber:69,columnNumber:21}})),_react["default"].createElement(_Components.Button,{title:"Login",onButtonPress:onLoginPress,__self:this,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:17}})));}